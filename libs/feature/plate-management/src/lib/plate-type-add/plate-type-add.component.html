<div class="surface-section px-6 py-6 surface-border border-1 border-round">
    <span class="block text-900 font-bold text-xl mb-4">Create Plate Type</span>
    <form [formGroup]="createPlateTypeForm" (ngSubmit)="onPlateInfosSubmitted()">
      <div class="grid grid-nogutter flex-wrap gap-3 p-fluid">
        <div class="col-12 lg:col-8">
          <div class="grid formgrid">
            <div class="col-12">
              <div class="p-float-label">
                <input
                  pInputText
                  formControlName="label"
                  aria-describedby="name-help"
                  id="name"
                />
                <label htmlFor="name">Plate Type Name</label>
              </div>
              <ng-container
                *ngIf="
                  createPlateTypeForm.get('label')?.dirty ||
                  createPlateTypeForm.get('label')?.touched
                "
              >
                <small
                  class="text-error"
                  *ngIf="
                    createPlateTypeForm.controls['label'].errors &&
                    createPlateTypeForm.controls['label'].errors['required']
                  "
                  >Ce champs est requis</small
                >
              </ng-container>
            </div>
            <!-- <div class="col-12 mt-4">
              <div class="p-float-label">
                <p-dropdown
                  id="plateFillingType"
                  formControlName="plateFillingType"
                  [options]="plateFillType"
                  placeholder="Select a filling type"
                ></p-dropdown>
                <label htmlFor="plateFillingType">Plate Filling Type</label>
              </div>
              <ng-container
                *ngIf="
                  createPlateTypeForm.get('plateFillingType')?.dirty ||
                  createPlateTypeForm.get('plateFillingType')?.touched
                "
              >
                <small
                  class="text-error"
                  *ngIf="
                    createPlateTypeForm.controls['plateFillingType'].errors &&
                    createPlateTypeForm.controls['plateFillingType'].errors[
                      'required'
                    ]
                  "
                  >Ce champs est requis</small
                >
              </ng-container>
            </div> -->
            <div class="col-12 lg:col-6 lg:mt-2">
              <span class="text-900 font-bold p-3"> Row Configuration </span>
              <div class="col-12 field">
                <div>
                  <span class="p-float-label mt-4">
                    <input
                      id="rowLength"
                      pInputText
                      [min]="2"
                      [max]="20"
                      type="number"
                      placeholder="Number of rows"
                      formControlName="rowLength"
                    />
                    <label htmlFor="rowLength">Number of rows</label>
                  </span>
                  <ng-container
                    *ngIf="
                      createPlateTypeForm.get('rowLength')?.dirty ||
                      createPlateTypeForm.get('rowLength')?.touched
                    "
                  >
                    <small
                      class="text-error"
                      *ngIf="
                        createPlateTypeForm.controls['rowLength'].errors &&
                        createPlateTypeForm.controls['rowLength'].errors[
                          'required'
                        ]
                      "
                      >Ce champs est requis</small
                    >
                  </ng-container>
                </div>
                <div>
                  <span class="p-float-label mt-4">
                    <p-dropdown
                      id="rowLabelType"
                      [readonly]="true"
                      formControlName="rowLabelType"
                      [options]="anotationLabelType"
                      placeholder="Row label type"
                    ></p-dropdown>
                    <label htmlFor="rowLabelType">Row label Type</label>
                  </span>
                  <ng-container
                    *ngIf="
                      createPlateTypeForm.get('rowLabelType')?.dirty ||
                      createPlateTypeForm.get('rowLabelType')?.touched
                    "
                  >
                    <small
                      class="text-error"
                      *ngIf="
                        createPlateTypeForm.controls['rowLabelType'].errors &&
                        createPlateTypeForm.controls['rowLabelType'].errors[
                          'required'
                        ]
                      "
                      >Ce champs est requis</small
                    >
                  </ng-container>
                </div>
              </div>
            </div>
            <div class="col-12 lg:col-6 lg:mt-2">
              <span class="text-900 font-bold p-3"> Column Configuration </span>
              <div class="col-12 field">
                <div>
                  <span class="p-float-label mt-4">
                    <input
                      id="colLength"
                      pInputText
                      type="number"
                      placeholder="Number of cols"
                      formControlName="colLength"
                    />
                    <label htmlFor="colLength">Number of col</label>
                  </span>
                  <ng-container
                    *ngIf="
                      createPlateTypeForm.get('colLength')?.dirty ||
                      createPlateTypeForm.get('colLength')?.touched
                    "
                  >
                    <small
                      class="text-error"
                      *ngIf="
                        createPlateTypeForm.controls['colLength'].errors &&
                        createPlateTypeForm.controls['colLength'].errors[
                          'required'
                        ]
                      "
                      >Ce champs est requis</small>
                    <small
                      class="text-error"
                      *ngIf="
                        createPlateTypeForm.controls['colLength'].errors &&
                        createPlateTypeForm.controls['colLength'].errors[
                          'min'
                        ]
                      "
                      >Veuillez renseigner la valeur minimale</small>
                  </ng-container>
                </div>
                <div>
                  <span class="p-float-label mt-4">
                    <p-dropdown
                      id="colLabelType"
                      [readonly]="true"
                      formControlName="colLabelType"
                      [options]="anotationLabelType"
                    ></p-dropdown>
                    <label htmlFor="colLabelType">Col label Type</label>
                  </span>
                  <ng-container
                    *ngIf="
                      createPlateTypeForm.get('colLabelType')?.dirty ||
                      createPlateTypeForm.get('colLabelType')?.touched
                    "
                  >
                    <small
                      class="text-error"
                      *ngIf="
                        createPlateTypeForm.controls['colLabelType'].errors &&
                        createPlateTypeForm.controls['colLabelType'].errors[
                          'required'
                        ]
                      "
                      >Ce champs est requis</small
                    >
                  </ng-container>
                </div>
              </div>
            </div>
          </div>
          <div
        class="flex flex-column sm:flex-row xl:w-6 justify-content-between align-items-center gap-3 py-2 mt-4"
      >
        <button
        type="button"
        (click)="goToListPage()"
          pButton
          pRipple
          class="p-button-danger flex-1 w-full p-button-outlined"
          label="Discard"
          icon="pi pi-fw pi-trash"
        ></button>
        <button
        type="submit"
        [loading]="isSubmitting"
          pButton
          pRipple
          class="p-button-primary flex-1 w-full border-round"
          label="Save"
          icon="pi pi-fw pi-check"
        ></button>
      </div>
        </div>

        <div class="flex-1 w-full lg:w-3 flex flex-column row-gap-3">
          <div class="border-round">
            <span
              class="text-900 font-bold block border-bottom-1 surface-border border-1 border-round p-3"
              >Preview</span
            >
            <div class="p-3">
              <ddsi-labs-apps-plate-plan-preview-block [disableMenu]="true"  [rowLabelType]="createPlateTypeForm.get('rowLabelType')?.value" [rowLength]="createPlateTypeForm.get('rowLength')?.value" [colLabelType]="createPlateTypeForm.get('colLabelType')?.value" [colLength]="createPlateTypeForm.get('colLength')?.value"></ddsi-labs-apps-plate-plan-preview-block>
                <ng-container *ngIf="!createPlateTypeForm.disabled">
                  <span
                    *ngIf="
                      (!createPlateTypeForm.disabled &&
                        !createPlateTypeForm.get('rowLength')?.valid) ||
                      !createPlateTypeForm.get('colLength')?.valid
                    "
                  >
                    Please choose valid value for the plate
                  </span>
                </ng-container>
            </div>
          </div>
        </div>
      </div>

    </form>
  </div>
